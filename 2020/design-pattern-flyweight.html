<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>è®¾è®¡æ¨¡å¼-ç»“æ„å‹-äº«å…ƒæ¨¡å¼ | CalmCenter</title><meta name="description" content="æ‰€è°“â€œäº«å…ƒâ€ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¢«å…±äº«çš„å•å…ƒã€‚äº«å…ƒæ¨¡å¼çš„æ„å›¾æ˜¯å¤ç”¨å¯¹è±¡ï¼ŒèŠ‚çœå†…å­˜ï¼Œå‰ææ˜¯äº«å…ƒå¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚"><meta name="keywords" content="ç¼–ç "><meta name="author" content="CalmCenter"><meta name="copyright" content="CalmCenter"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = 'false'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css"><link rel="canonical" href="https://calmcenter.club/2020/design-pattern-flyweight.html"><link rel="next" title="è®¾è®¡æ¨¡å¼-ç»“æ„å‹-ç»„åˆæ¨¡å¼" href="https://calmcenter.club/2020/design-pattern-composite.html"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"æ‰¾ä¸åˆ°æ‚¨æŸ¥è¯¢çš„å†…å®¹:${query}"}},
  translate: undefined,
  copy: {
    success: 'å¤åˆ¶æˆåŠŸ',
    error: 'å¤åˆ¶é”™è¯¯',
    noSupport: 'æµè§ˆå™¨ä¸æ”¯æŒ'
  },
  bookmark: {
    message_prev: 'æŒ‰',
    message_next: 'é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾'
  },
  runtime_unit: 'å¤©',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: true,
  fancybox: false,
  Snackbar: {"bookmark":{"message_prev":"æŒ‰","message_next":"é”®å°†æœ¬é¡µåŠ å…¥ä¹¦ç­¾"},"chs_to_cht":"ä½ å·²åˆ‡æ¢ä¸ºç¹ä½“","cht_to_chs":"ä½ å·²åˆ‡æ¢ä¸ºç®€ä½“","day_to_night":"ä½ å·²åˆ‡æ¢ä¸ºæ·±è‰²æ¨¡å¼","night_to_day":"ä½ å·²åˆ‡æ¢ä¸ºæµ…è‰²æ¨¡å¼","bgLight":"#49b1f5","bgDark":"#2d3035","position":"top-right"},
  baiduPush: false,
  highlightCopy: true,
  highlightLang: false,
  highlightShrink: 'none',
  isFontAwesomeV5: false,
  isPhotoFigcaption: true,
  islazyload: true,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">æ–‡ç« </div><div class="length_num">38</div></a></div></div><div class="mobile_data_item is-center">      <div class="mobile_data_link"><a href="/tags/"><div class="headline">æ ‡ç­¾</div><div class="length_num">17</div></a></div></div><div class="mobile_data_item is-center">     <div class="mobile_data_link"><a href="/categories/"><div class="headline">åˆ†ç±»</div><div class="length_num">5</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">ç›®å½•</div><div class="sidebar-toc__progress"><span class="progress-notice">ä½ å·²ç»è¯»äº†</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#1-äº«å…ƒæ¨¡å¼-UML"><span class="toc-text">1 äº«å…ƒæ¨¡å¼ UML</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-ç®€å•å®ç°"><span class="toc-text">2 ç®€å•å®ç°</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-äº«å…ƒæ¨¡å¼-vs-å•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± "><span class="toc-text">3 äº«å…ƒæ¨¡å¼ vs å•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± </span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-äº«å…ƒæ¨¡å¼è·Ÿå•ä¾‹çš„åŒºåˆ«"><span class="toc-text">3.1 äº«å…ƒæ¨¡å¼è·Ÿå•ä¾‹çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-äº«å…ƒæ¨¡å¼è·Ÿç¼“å­˜çš„åŒºåˆ«"><span class="toc-text">3.2 äº«å…ƒæ¨¡å¼è·Ÿç¼“å­˜çš„åŒºåˆ«</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-äº«å…ƒæ¨¡å¼è·Ÿå¯¹è±¡æ± çš„åŒºåˆ«"><span class="toc-text">3.3 äº«å…ƒæ¨¡å¼è·Ÿå¯¹è±¡æ± çš„åŒºåˆ«</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-äº«å…ƒæ¨¡å¼åœ¨-Integerã€String-ä¸­çš„åº”ç”¨"><span class="toc-text">4 äº«å…ƒæ¨¡å¼åœ¨ Integerã€String ä¸­çš„åº”ç”¨</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#4-1-Integer"><span class="toc-text">4.1 Integer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#4-2-String"><span class="toc-text">4.2 String</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-Android-æºç ä¸­çš„äº«å…ƒï¼ˆHandlerï¼‰"><span class="toc-text">5 Android æºç ä¸­çš„äº«å…ƒï¼ˆHandlerï¼‰</span></a></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://gitee.com/CalmCenter/Pic/raw/master/cover17.webp)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">CalmCenter</a></span><span class="pull_right menus"><div id="search_button"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> æœç´¢</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> é¦–é¡µ</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> å½’æ¡£</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> æ ‡ç­¾</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> åˆ†ç±»</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fa fa-link"></i><span> å‹æƒ…é“¾æ¥</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-äº«å…ƒæ¨¡å¼</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="å‘è¡¨äº 2020-09-21 18:59:00"><i class="fa fa-calendar" aria-hidden="true"></i> å‘è¡¨äº 2020-09-21</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="æ›´æ–°äº 2020-09-22 16:37:56"><i class="fa fa-history" aria-hidden="true"></i> æ›´æ–°äº 2020-09-22</span></time><span class="post-meta__categories"><span class="post-meta__separator">|</span><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/%E7%BC%96%E7%A0%81/">ç¼–ç </a></span></div><div class="meta-secondline"> <span class="post-meta-wordcount"><i class="post-meta__icon fa fa-file-word-o" aria-hidden="true"></i><span>å­—æ•°æ€»è®¡:</span><span class="word-count">5k</span><span class="post-meta__separator">|</span><i class="post-meta__icon fa fa-clock-o" aria-hidden="true"></i><span>é˜…è¯»æ—¶é•¿: 18 åˆ†é’Ÿ</span></span></div><div class="meta-thirdline"><span class="post-meta-pv-cv"><span class="post-meta__separator">|</span><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>é˜…è¯»é‡:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><p>æ‰€è°“ â€œäº«å…ƒâ€ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯è¢«å…±äº«çš„å•å…ƒã€‚äº«å…ƒæ¨¡å¼çš„æ„å›¾æ˜¯å¤ç”¨å¯¹è±¡ï¼ŒèŠ‚çœå†…å­˜ï¼Œå‰ææ˜¯äº«å…ƒå¯¹è±¡æ˜¯ä¸å¯å˜å¯¹è±¡ã€‚</p>
<p>å½“ä¸€ä¸ªç³»ç»Ÿä¸­å­˜åœ¨å¤§é‡é‡å¤å¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœè¿™äº›é‡å¤çš„å¯¹è±¡æ˜¯<strong>ä¸å¯å˜å¯¹è±¡</strong>ï¼Œæˆ‘ä»¬å°±å¯ä»¥åˆ©ç”¨äº«å…ƒæ¨¡å¼å°†å¯¹è±¡è®¾è®¡æˆäº«å…ƒï¼Œåœ¨å†…å­˜ä¸­åªä¿ç•™ä¸€ä»½å®ä¾‹ï¼Œä¾›å¤šå¤„ä»£ç å¼•ç”¨ã€‚è¿™æ ·å¯ä»¥å‡å°‘å†…å­˜ä¸­å¯¹è±¡çš„æ•°é‡ï¼Œèµ·åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ã€‚</p>
<p>å®é™…ä¸Šï¼Œä¸ä»…ä»…ç›¸åŒå¯¹è±¡å¯ä»¥è®¾è®¡æˆäº«å…ƒï¼Œå¯¹äºç›¸ä¼¼å¯¹è±¡ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥å°†è¿™äº›å¯¹è±¡ä¸­ç›¸åŒçš„éƒ¨åˆ†ï¼ˆå­—æ®µï¼‰æå–å‡ºæ¥ï¼Œè®¾è®¡æˆäº«å…ƒï¼Œè®©è¿™äº›å¤§é‡ç›¸ä¼¼å¯¹è±¡å¼•ç”¨è¿™äº›äº«å…ƒã€‚</p>
<p>å®šä¹‰ä¸­çš„ â€œ<strong>ä¸å¯å˜å¯¹è±¡</strong>â€ æŒ‡çš„æ˜¯ï¼Œä¸€æ—¦é€šè¿‡æ„é€ å‡½æ•°åˆå§‹åŒ–å®Œæˆä¹‹åï¼Œå®ƒçš„çŠ¶æ€ï¼ˆå¯¹è±¡çš„æˆå‘˜å˜é‡æˆ–è€…å±æ€§ï¼‰å°±ä¸ä¼šå†è¢«ä¿®æ”¹äº†ã€‚æ‰€ä»¥ï¼Œä¸å¯å˜å¯¹è±¡ä¸èƒ½æš´éœ²ä»»ä½• <code>set()</code> ç­‰ä¿®æ”¹å†…éƒ¨çŠ¶æ€çš„æ–¹æ³•ã€‚ä¹‹æ‰€ä»¥è¦æ±‚äº«å…ƒæ˜¯ä¸å¯å˜å¯¹è±¡ï¼Œé‚£æ˜¯å› ä¸ºå®ƒä¼šè¢«å¤šå¤„ä»£ç å…±äº«ä½¿ç”¨ï¼Œé¿å…ä¸€å¤„ä»£ç å¯¹äº«å…ƒè¿›è¡Œäº†ä¿®æ”¹ï¼Œå½±å“åˆ°å…¶ä»–ä½¿ç”¨å®ƒçš„ä»£ç ã€‚</p>
<h1 id="1-äº«å…ƒæ¨¡å¼-UML"><a href="#1-äº«å…ƒæ¨¡å¼-UML" class="headerlink" title="1 äº«å…ƒæ¨¡å¼ UML"></a>1 äº«å…ƒæ¨¡å¼ UML</h1><p><img src= data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs= data-src="https://gitee.com/CalmCenter/Pic/raw/master/design/design_uml_flyweight.webp" alt="å›¾ç‰‡æ¥æºäºã€ŠAndroid æºç è®¾è®¡æ¨¡å¼è§£æä¸å®æˆ˜ã€‹"></p>
<p>ä¸¾ä¸ª ğŸŒ°</p>
<p>è¿‡å¹´å›å®¶ä¹°ç«è½¦ç¥¨æ˜¯ä¸€ä»¶å¾ˆå›°éš¾çš„äº‹ï¼Œæ— æ•°äººç”¨åˆ·ç¥¨æ’ä»¶è½¯ä»¶åœ¨å‘æœåŠ¡ç«¯å‘å‡ºè¯·æ±‚ï¼Œå¯¹äºæ¯ä¸€ä¸ªè¯·æ±‚æœåŠ¡å™¨éƒ½å¿…é¡»åšå‡ºåº”ç­”ã€‚</p>
<p>åœ¨ç”¨æˆ·è®¾ç½®å¥½å‡ºå‘åœ°å’Œç›®çš„åœ°ä¹‹åï¼Œæ¯æ¬¡è¯·æ±‚éƒ½è¿”å›ä¸€ä¸ªæŸ¥è¯¢çš„è½¦ç¥¨ç»“æœã€‚é‚£ä¹ˆå½“æ•°ä»¥ä¸‡è®¡çš„äººä¸é—´æ–­åœ¨è¯·æ±‚æ•°æ®æ—¶ï¼Œå¦‚æœæ¯æ¬¡éƒ½é‡æ–°åˆ›å»ºä¸€ä¸ªæŸ¥è¯¢çš„è½¦ç¥¨ç»“æœï¼Œé‚£ä¹ˆå¿…ç„¶ä¼šé€ æˆå¤§é‡é‡å¤å¯¹è±¡çš„åˆ›å»ºã€é”€æ¯ï¼Œä½¿å¾— <code>GC</code> ä»»åŠ¡ç¹é‡ã€å†…å­˜å ç”¨ç‡é«˜å±…ä¸ä¸‹ã€‚</p>
<p>è€Œè¿™ç±»é—®é¢˜é€šè¿‡äº«å…ƒæ¨¡å¼å°±èƒ½å¤Ÿå¾—åˆ°å¾ˆå¥½åœ°æ”¹å–„ï¼Œä»åŸå¸‚ <code>A</code> åˆ°åŸå¸‚ <code>B</code> çš„è½¦è¾†æ˜¯æœ‰é™çš„ï¼Œè½¦ä¸Šçš„é“ºä½ä¹Ÿå°±æ˜¯ç¡¬å§ã€ç¡¬å§ã€åç¥¨ 3 ç§ã€‚æˆ‘ä»¬å°†è¿™äº›å¯ä»¥å…¬ç”¨çš„å¯¹è±¡ç¼“å­˜èµ·æ¥ï¼Œåœ¨ç”¨æˆ·æŸ¥è¯¢æ—¶ä¼˜å…ˆä½¿ç”¨ç¼“å­˜ï¼Œå¦‚æœæ²¡æœ‰ç¼“å­˜åˆ™é‡æ–°åˆ›å»ºã€‚è¿™æ ·å°±å°†æˆåƒä¸Šä¸‡çš„å¯¹è±¡å˜ä¸ºäº†å¯é€‰æ‹©çš„æœ‰é™æ•°é‡ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Ticket</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">showTicketInfo</span><span class="params">(String bunk)</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TrainTicket</span> <span class="keyword">implements</span> <span class="title">Ticket</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String from;</span><br><span class="line">    <span class="keyword">private</span> String to;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">TrainTicket</span><span class="params">(String from, String to)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.from = from;</span><br><span class="line">        <span class="keyword">this</span>.to = to;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">showTicketInfo</span><span class="params">(String bunk)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> price = <span class="keyword">new</span> Random().nextInt(<span class="number">300</span>);</span><br><span class="line">        System.out.println(<span class="string">"è´­ä¹° ä» "</span> + from + <span class="string">" åˆ° "</span> + to + <span class="string">" çš„ "</span> + bunk + <span class="string">" ç«è½¦ç¥¨ï¼Œä»·æ ¼ï¼š"</span> + price);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TicketFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> Map&lt;String, Ticket&gt; sTringTicketMap = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Ticket <span class="title">getTicket</span><span class="params">(String from, String to)</span> </span>&#123;</span><br><span class="line">        String key = from + <span class="string">"-"</span> + to;</span><br><span class="line">        <span class="keyword">if</span> (sTringTicketMap.containsKey(key)) &#123;</span><br><span class="line">            System.out.println(<span class="string">"ä½¿ç”¨ç¼“å­˜ ==&gt;"</span> + key);</span><br><span class="line">            <span class="keyword">return</span> sTringTicketMap.get(key);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">"åˆ›å»ºå¯¹è±¡ ==&gt;"</span> + key);</span><br><span class="line">            Ticket ticket = <span class="keyword">new</span> TrainTicket(from, to);</span><br><span class="line">            sTringTicketMap.put(key, ticket);</span><br><span class="line">            <span class="keyword">return</span> ticket;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="2-ç®€å•å®ç°"><a href="#2-ç®€å•å®ç°" class="headerlink" title="2 ç®€å•å®ç°"></a>2 ç®€å•å®ç°</h1><p>ä¸¾ä¸ª ğŸŒ°</p>
<p>å‡è®¾æˆ‘ä»¬åœ¨å¼€å‘ä¸€ä¸ªæ£‹ç‰Œæ¸¸æˆï¼ˆæ¯”å¦‚è±¡æ£‹ï¼‰ã€‚ä¸€ä¸ªæ¸¸æˆå…ä¸­æœ‰æˆåƒä¸Šä¸‡ä¸ªâ€œæˆ¿é—´â€ï¼Œæ¯ä¸ªæˆ¿é—´å¯¹åº”ä¸€ä¸ªæ£‹å±€ã€‚æ£‹å±€è¦ä¿å­˜æ¯ä¸ªæ£‹å­çš„æ•°æ®ï¼Œæ¯”å¦‚ï¼šæ£‹å­ç±»å‹ï¼ˆå°†ã€ç›¸ã€å£«ã€ç‚®ç­‰ï¼‰ã€æ£‹å­é¢œè‰²ï¼ˆçº¢æ–¹ã€é»‘æ–¹ï¼‰ã€æ£‹å­åœ¨æ£‹å±€ä¸­çš„ä½ç½®ã€‚åˆ©ç”¨è¿™äº›æ•°æ®ï¼Œæˆ‘ä»¬å°±èƒ½æ˜¾ç¤ºä¸€ä¸ªå®Œæ•´çš„æ£‹ç›˜ç»™ç©å®¶ã€‚</p>
<p>ä¸ºäº†è®°å½•æ¯ä¸ªæˆ¿é—´å½“å‰çš„æ£‹å±€æƒ…å†µï¼Œæˆ‘ä»¬éœ€è¦ç»™æ¯ä¸ªæˆ¿é—´éƒ½åˆ›å»ºä¸€ä¸ª <code>ChessBoard</code> æ£‹å±€å¯¹è±¡ã€‚å› ä¸ºæ¸¸æˆå¤§å…ä¸­æœ‰æˆåƒä¸Šä¸‡çš„æˆ¿é—´ï¼ˆå®é™…ä¸Šï¼Œç™¾ä¸‡äººåŒæ—¶åœ¨çº¿çš„æ¸¸æˆå¤§å…ä¹Ÿæœ‰å¾ˆå¤šï¼‰ï¼Œé‚£ä¿å­˜è¿™ä¹ˆå¤šæ£‹å±€å¯¹è±¡å°±ä¼šæ¶ˆè€—å¤§é‡çš„å†…å­˜ã€‚</p>
<p>è¿™ä¸ªæ—¶å€™ï¼Œ<strong>äº«å…ƒæ¨¡å¼</strong>å°±å¯ä»¥æ´¾ä¸Šç”¨åœºäº†ã€‚åƒåˆšåˆšçš„å®ç°æ–¹å¼ï¼Œåœ¨å†…å­˜ä¸­ä¼šæœ‰å¤§é‡çš„ç›¸ä¼¼å¯¹è±¡ã€‚è¿™äº›ç›¸ä¼¼å¯¹è±¡çš„ <code>id</code>ã€<code>text</code>ã€<code>color</code> éƒ½æ˜¯ç›¸åŒçš„ï¼Œå”¯ç‹¬ <code>positionX</code>ã€<code>positionY</code> ä¸åŒã€‚å®é™…ä¸Šï¼Œæˆ‘ä»¬å¯ä»¥å°†æ£‹å­çš„ <code>id</code>ã€<code>text</code>ã€<code>color</code> å±æ€§æ‹†åˆ†å‡ºæ¥ï¼Œè®¾è®¡æˆç‹¬ç«‹çš„ç±»ï¼Œå¹¶ä¸”ä½œä¸ºäº«å…ƒä¾›å¤šä¸ªæ£‹ç›˜å¤ç”¨ã€‚è¿™æ ·ï¼Œæ£‹ç›˜åªéœ€è¦è®°å½•æ¯ä¸ªæ£‹å­çš„ä½ç½®ä¿¡æ¯å°±å¯ä»¥äº†ã€‚</p>
<p>æ£‹ç›˜ä¸Šæ——å­é¢œè‰²å’Œå­—éƒ½æ˜¯å›ºå®šçš„ï¼Œåªéœ€è¦å…¨éƒ¨æ·»åŠ ï¼Œå¹¶ä¸”ç¼“å­˜ä½¿ç”¨å°±å¥½ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChessPieceUnit</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> id;</span><br><span class="line">    <span class="keyword">private</span> String text;</span><br><span class="line">    <span class="keyword">private</span> Color color;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChessPieceUnit</span><span class="params">(<span class="keyword">int</span> id, String text, Color color)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.text = text;</span><br><span class="line">        <span class="keyword">this</span>.color = color;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">enum</span> Color &#123;RED, BLACK&#125; <span class="comment">// ...çœç•¥å…¶ä»–å±æ€§å’Œgetter/setteræ–¹æ³•...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChessPiece</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> ChessPieceUnit chessPieceUnit;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> positionX;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> positionY;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">ChessPiece</span><span class="params">(ChessPieceUnit chessPieceUnit, <span class="keyword">int</span> positionX, <span class="keyword">int</span> positionY)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.chessPieceUnit = chessPieceUnit;</span><br><span class="line">        <span class="keyword">this</span>.positionX = positionX;</span><br><span class="line">        <span class="keyword">this</span>.positionY = positionX;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChessPieceUnitFactory</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> Map&lt;Integer, ChessPieceUnit&gt; pieces = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        pieces.put(<span class="number">1</span>, <span class="keyword">new</span> ChessPieceUnit(<span class="number">1</span>, <span class="string">"è»Š"</span>, ChessPieceUnit.Color.BLACK));</span><br><span class="line">        pieces.put(<span class="number">2</span>, <span class="keyword">new</span> ChessPieceUnit(<span class="number">2</span>, <span class="string">"é¦¬"</span>, ChessPieceUnit.Color.BLACK));</span><br><span class="line">        <span class="comment">//...çœç•¥æ‘†æ”¾å…¶ä»–æ£‹å­çš„ä»£ç ...</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> ChessPieceUnit <span class="title">getChessPiece</span><span class="params">(<span class="keyword">int</span> chessPieceId)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> pieces.get(chessPieceId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>æˆ‘ä»¬åˆ©ç”¨å·¥å‚ç±»æ¥ç¼“å­˜ <code>ChessPieceUnit</code> ä¿¡æ¯ï¼ˆä¹Ÿå°±æ˜¯ <code>id</code>ã€<code>text</code>ã€<code>color</code>ï¼‰ã€‚é€šè¿‡å·¥å‚ç±»è·å–åˆ°çš„ <code>ChessPieceUnit</code> å°±æ˜¯äº«å…ƒã€‚æ‰€æœ‰çš„ <code>ChessBoard</code> å¯¹è±¡å…±äº«è¿™ 30 ä¸ª <code>ChessPieceUnit</code> å¯¹è±¡ï¼ˆå› ä¸ºè±¡æ£‹ä¸­åªæœ‰ 30 ä¸ªæ£‹å­ï¼‰ã€‚åœ¨ä½¿ç”¨äº«å…ƒæ¨¡å¼ä¹‹å‰ï¼Œè®°å½• 1 ä¸‡ä¸ªæ£‹å±€ï¼Œæˆ‘ä»¬è¦åˆ›å»º 30 ä¸‡ï¼ˆ 30*1 ä¸‡ï¼‰ä¸ªæ£‹å­çš„ <code>ChessPieceUnit</code> å¯¹è±¡ã€‚åˆ©ç”¨äº«å…ƒæ¨¡å¼ï¼Œæˆ‘ä»¬åªéœ€è¦åˆ›å»º 30 ä¸ªäº«å…ƒå¯¹è±¡ä¾›æ‰€æœ‰æ£‹å±€å…±äº«ä½¿ç”¨å³å¯ï¼Œå¤§å¤§èŠ‚çœäº†å†…å­˜ã€‚</p>
<p>äº«å…ƒæ¨¡å¼å®é™…ä¸Šï¼Œå®ƒçš„ä»£ç å®ç°éå¸¸ç®€å•ï¼Œä¸»è¦æ˜¯é€šè¿‡å·¥å‚æ¨¡å¼ï¼Œåœ¨å·¥å‚ç±»ä¸­ï¼Œé€šè¿‡ä¸€ä¸ª <code>Map</code> æ¥ç¼“å­˜å·²ç»åˆ›å»ºè¿‡çš„äº«å…ƒå¯¹è±¡ï¼Œæ¥è¾¾åˆ°å¤ç”¨çš„ç›®çš„ã€‚</p>
<h1 id="3-äº«å…ƒæ¨¡å¼-vs-å•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± "><a href="#3-äº«å…ƒæ¨¡å¼-vs-å•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± " class="headerlink" title="3 äº«å…ƒæ¨¡å¼ vs å•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± "></a>3 äº«å…ƒæ¨¡å¼ vs å•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± </h1><p>åœ¨ä¸Šé¢çš„è®²è§£ä¸­ï¼Œæˆ‘ä»¬å¤šæ¬¡æåˆ° â€œå…±äº«â€ â€œç¼“å­˜â€ â€œå¤ç”¨â€ è¿™äº›å­—çœ¼ï¼Œé‚£å®ƒè·Ÿå•ä¾‹ã€ç¼“å­˜ã€å¯¹è±¡æ± è¿™äº›æ¦‚å¿µæœ‰ä»€ä¹ˆåŒºåˆ«å‘¢ï¼Ÿ</p>
<h2 id="3-1-äº«å…ƒæ¨¡å¼è·Ÿå•ä¾‹çš„åŒºåˆ«"><a href="#3-1-äº«å…ƒæ¨¡å¼è·Ÿå•ä¾‹çš„åŒºåˆ«" class="headerlink" title="3.1 äº«å…ƒæ¨¡å¼è·Ÿå•ä¾‹çš„åŒºåˆ«"></a>3.1 äº«å…ƒæ¨¡å¼è·Ÿå•ä¾‹çš„åŒºåˆ«</h2><p>åœ¨å•ä¾‹æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç±»åªèƒ½åˆ›å»ºä¸€ä¸ªå¯¹è±¡ï¼Œè€Œåœ¨äº«å…ƒæ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç±»å¯ä»¥åˆ›å»ºå¤šä¸ªå¯¹è±¡ï¼Œæ¯ä¸ªå¯¹è±¡è¢«å¤šå¤„ä»£ç å¼•ç”¨å…±äº«ã€‚å®é™…ä¸Šï¼Œäº«å…ƒæ¨¡å¼æœ‰ç‚¹ç±»ä¼¼äºä¹‹å‰è®²åˆ°çš„å•ä¾‹çš„å˜ä½“ï¼šå¤šä¾‹ã€‚</p>
<p>åŒºåˆ«ä¸¤ç§è®¾è®¡æ¨¡å¼ï¼Œä¸èƒ½å…‰çœ‹ä»£ç å®ç°ï¼Œè€Œæ˜¯è¦çœ‹è®¾è®¡æ„å›¾ï¼Œä¹Ÿå°±æ˜¯è¦è§£å†³çš„é—®é¢˜ã€‚åº”ç”¨äº«å…ƒæ¨¡å¼æ˜¯ä¸ºäº†å¯¹è±¡å¤ç”¨ï¼ŒèŠ‚çœå†…å­˜ï¼Œè€Œåº”ç”¨å¤šä¾‹æ¨¡å¼æ˜¯ä¸ºäº†é™åˆ¶å¯¹è±¡çš„ä¸ªæ•°ã€‚</p>
<h2 id="3-2-äº«å…ƒæ¨¡å¼è·Ÿç¼“å­˜çš„åŒºåˆ«"><a href="#3-2-äº«å…ƒæ¨¡å¼è·Ÿç¼“å­˜çš„åŒºåˆ«" class="headerlink" title="3.2 äº«å…ƒæ¨¡å¼è·Ÿç¼“å­˜çš„åŒºåˆ«"></a>3.2 äº«å…ƒæ¨¡å¼è·Ÿç¼“å­˜çš„åŒºåˆ«</h2><p>åœ¨äº«å…ƒæ¨¡å¼çš„å®ç°ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å·¥å‚ç±»æ¥ â€œç¼“å­˜â€ å·²ç»åˆ›å»ºå¥½çš„å¯¹è±¡ã€‚è¿™é‡Œçš„ â€œç¼“å­˜â€ å®é™…ä¸Šæ˜¯ â€œå­˜å‚¨â€ çš„æ„æ€ï¼Œè·Ÿæˆ‘ä»¬å¹³æ—¶æ‰€è¯´çš„ â€œæ•°æ®åº“ç¼“å­˜â€ â€œCPU ç¼“å­˜â€ â€œ<code>MemCache</code> ç¼“å­˜â€ æ˜¯ä¸¤å›äº‹ã€‚æˆ‘ä»¬å¹³æ—¶æ‰€è®²çš„ç¼“å­˜ï¼Œä¸»è¦æ˜¯ä¸ºäº†æé«˜è®¿é—®æ•ˆç‡ï¼Œè€Œéå¤ç”¨ã€‚</p>
<h2 id="3-3-äº«å…ƒæ¨¡å¼è·Ÿå¯¹è±¡æ± çš„åŒºåˆ«"><a href="#3-3-äº«å…ƒæ¨¡å¼è·Ÿå¯¹è±¡æ± çš„åŒºåˆ«" class="headerlink" title="3.3 äº«å…ƒæ¨¡å¼è·Ÿå¯¹è±¡æ± çš„åŒºåˆ«"></a>3.3 äº«å…ƒæ¨¡å¼è·Ÿå¯¹è±¡æ± çš„åŒºåˆ«</h2><p>æ± åŒ–æŠ€æœ¯ä¸­çš„ â€œå¤ç”¨â€ å¯ä»¥ç†è§£ä¸º â€œé‡å¤ä½¿ç”¨â€ ï¼Œä¸»è¦ç›®çš„æ˜¯èŠ‚çœæ—¶é—´ï¼ˆæ¯”å¦‚ä»æ•°æ®åº“æ± ä¸­å–ä¸€ä¸ªè¿æ¥ï¼Œä¸éœ€è¦é‡æ–°åˆ›å»ºï¼‰ã€‚<strong>åœ¨ä»»æ„æ—¶åˆ»ï¼Œæ¯ä¸€ä¸ªå¯¹è±¡ã€è¿æ¥ã€çº¿ç¨‹ï¼Œå¹¶ä¸ä¼šè¢«å¤šå¤„ä½¿ç”¨ï¼Œè€Œæ˜¯è¢«ä¸€ä¸ªä½¿ç”¨è€…ç‹¬å ï¼Œå½“ä½¿ç”¨å®Œæˆä¹‹åï¼Œæ”¾å›åˆ°æ± ä¸­ï¼Œå†ç”±å…¶ä»–ä½¿ç”¨è€…é‡å¤åˆ©ç”¨</strong>ã€‚äº«å…ƒæ¨¡å¼ä¸­çš„â€œå¤ç”¨â€å¯ä»¥ç†è§£ä¸º â€œå…±äº«ä½¿ç”¨â€ï¼Œ<strong>åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­ï¼Œéƒ½æ˜¯è¢«æ‰€æœ‰ä½¿ç”¨è€…å…±äº«çš„</strong>ï¼Œä¸»è¦ç›®çš„æ˜¯èŠ‚çœç©ºé—´ã€‚</p>
<h1 id="4-äº«å…ƒæ¨¡å¼åœ¨-Integerã€String-ä¸­çš„åº”ç”¨"><a href="#4-äº«å…ƒæ¨¡å¼åœ¨-Integerã€String-ä¸­çš„åº”ç”¨" class="headerlink" title="4 äº«å…ƒæ¨¡å¼åœ¨ Integerã€String ä¸­çš„åº”ç”¨"></a>4 äº«å…ƒæ¨¡å¼åœ¨ Integerã€String ä¸­çš„åº”ç”¨</h1><h2 id="4-1-Integer"><a href="#4-1-Integer" class="headerlink" title="4.1 Integer"></a>4.1 Integer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Integer i1 = <span class="number">56</span>;</span><br><span class="line">Integer i2 = <span class="number">56</span>;</span><br><span class="line">Integer i3 = <span class="number">129</span>;</span><br><span class="line">Integer i4 = <span class="number">129</span>;</span><br><span class="line">System.out.println(i1 == i2);</span><br><span class="line">System.out.println(i3 == i4);</span><br></pre></td></tr></table></figure>

<p>è¦æ­£ç¡®åœ°åˆ†æä¸Šé¢çš„ä»£ç ï¼Œæˆ‘ä»¬éœ€è¦å¼„æ¸…æ¥šä¸‹é¢ä¸¤ä¸ªé—®é¢˜ï¼š</p>
<ul>
<li>å¦‚ä½•åˆ¤å®šä¸¤ä¸ª <code>Java</code> å¯¹è±¡æ˜¯å¦ç›¸ç­‰ï¼ˆä¹Ÿå°±ä»£ç ä¸­çš„ â€œ==â€ æ“ä½œç¬¦çš„å«ä¹‰ï¼‰ï¼Ÿ</li>
<li>ä»€ä¹ˆæ˜¯è‡ªåŠ¨è£…ç®±ï¼ˆ<code>Autoboxing</code>ï¼‰å’Œè‡ªåŠ¨æ‹†ç®±ï¼ˆ<code>Unboxing</code>ï¼‰ï¼Ÿ</li>
</ul>
<p>æ‰€è°“çš„<strong>è‡ªåŠ¨è£…ç®±</strong>ï¼Œå°±æ˜¯è‡ªåŠ¨å°†åŸºæœ¬æ•°æ®ç±»å‹è½¬æ¢ä¸ºåŒ…è£…å™¨ç±»å‹ã€‚æ‰€è°“çš„<strong>è‡ªåŠ¨æ‹†ç®±</strong>ï¼Œä¹Ÿå°±æ˜¯è‡ªåŠ¨å°†åŒ…è£…å™¨ç±»å‹è½¬åŒ–ä¸ºåŸºæœ¬æ•°æ®ç±»å‹ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">56</span>; <span class="comment">//è‡ªåŠ¨è£…ç®±</span></span><br><span class="line"><span class="keyword">int</span> j = i; <span class="comment">//è‡ªåŠ¨æ‹†ç®±</span></span><br></pre></td></tr></table></figure>

<p>æ•°å€¼ <code>56</code> æ˜¯åŸºæœ¬æ•°æ®ç±»å‹ <code>int</code>ï¼Œå½“èµ‹å€¼ç»™åŒ…è£…å™¨ç±»å‹ï¼ˆ<code>Integer</code>ï¼‰å˜é‡çš„æ—¶å€™ï¼Œè§¦å‘è‡ªåŠ¨è£…ç®±æ“ä½œï¼Œåˆ›å»ºä¸€ä¸ª <code>Integer</code> ç±»å‹çš„å¯¹è±¡ï¼Œå¹¶ä¸”èµ‹å€¼ç»™å˜é‡ <code>i</code>ã€‚å…¶åº•å±‚ç›¸å½“äºæ‰§è¡Œäº†ä¸‹é¢è¿™æ¡è¯­å¥ï¼š</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Integer i = <span class="number">59</span>ï¼›åº•å±‚æ‰§è¡Œäº†ï¼šInteger i = Integer.valueOf(<span class="number">59</span>);</span><br></pre></td></tr></table></figure>

<p>å½“æˆ‘ä»¬é€šè¿‡ â€œ==â€ æ¥åˆ¤å®šä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç›¸ç­‰çš„æ—¶å€™ï¼Œå®é™…ä¸Šæ˜¯åœ¨<strong>åˆ¤æ–­ä¸¤ä¸ªå±€éƒ¨å˜é‡å­˜å‚¨çš„åœ°å€æ˜¯å¦ç›¸åŒ</strong>ï¼Œæ¢å¥è¯è¯´ï¼Œæ˜¯åœ¨<strong>åˆ¤æ–­ä¸¤ä¸ªå±€éƒ¨å˜é‡æ˜¯å¦æŒ‡å‘ç›¸åŒçš„å¯¹è±¡</strong>ã€‚</p>
<p>å›å¤´çœ‹é‚£æ®µä»£ç ï¼Œå‰ <code>4</code> è¡Œèµ‹å€¼è¯­å¥éƒ½ä¼šè§¦å‘è‡ªåŠ¨è£…ç®±æ“ä½œï¼Œä¹Ÿå°±æ˜¯ä¼šåˆ›å»º <code>Integer</code> å¯¹è±¡å¹¶ä¸”èµ‹å€¼ç»™ <code>i1</code>ã€<code>i2</code>ã€<code>i3</code>ã€<code>i4</code> è¿™å››ä¸ªå˜é‡ã€‚æ ¹æ®åˆšåˆšçš„è®²è§£ï¼Œ<code>i1</code>ã€<code>i2</code> å°½ç®¡å­˜å‚¨çš„æ•°å€¼ç›¸åŒï¼Œéƒ½æ˜¯ <code>56</code>ï¼Œä½†æ˜¯æŒ‡å‘ä¸åŒçš„ <code>Integer</code> å¯¹è±¡ï¼Œæ‰€ä»¥é€šè¿‡ <code>â€œ==â€</code> æ¥åˆ¤å®šæ˜¯å¦ç›¸åŒçš„æ—¶å€™ï¼Œä¼šè¿”å› falseã€‚åŒç†ï¼Œ<code>i3==i4</code> åˆ¤å®šè¯­å¥ä¹Ÿä¼šè¿”å› <code>false</code>ã€‚</p>
<p>ä»¥ä¸ºè¿™æ ·å°±å®Œäº†å—ï¼Ÿä¸Šé¢çš„åˆ†æè¿˜æ˜¯ä¸å¯¹ï¼Œç­”æ¡ˆå¹¶éæ˜¯ä¸¤ä¸ª <code>false</code>ï¼Œè€Œæ˜¯ä¸€ä¸ª <code>true</code>ï¼Œä¸€ä¸ª <code>false</code>ã€‚<br>è¿™æ­£æ˜¯å› ä¸º <code>Integer</code> ç”¨åˆ°äº†äº«å…ƒæ¨¡å¼æ¥å¤ç”¨å¯¹è±¡ï¼Œæ‰å¯¼è‡´äº†è¿™æ ·çš„è¿è¡Œç»“æœã€‚å½“æˆ‘ä»¬é€šè¿‡è‡ªåŠ¨è£…ç®±ï¼Œä¹Ÿå°±æ˜¯è°ƒç”¨ <code>valueOf()</code> æ¥åˆ›å»º <code>Integer</code> å¯¹è±¡çš„æ—¶å€™ï¼Œå¦‚æœè¦åˆ›å»ºçš„ <code>Integer</code> å¯¹è±¡çš„å€¼åœ¨ <code>-128</code> åˆ° <code>127</code> ä¹‹é—´ï¼Œä¼šä» <code>IntegerCache</code> ç±»ä¸­ç›´æ¥è¿”å›ï¼Œå¦åˆ™æ‰è°ƒç”¨ <code>new</code> æ–¹æ³•åˆ›å»ºã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Integer <span class="title">valueOf</span><span class="params">(<span class="keyword">int</span> i)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)</span><br><span class="line">        <span class="keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Integer(i);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œçš„ <code>IntegerCache</code> ç›¸å½“äºäº«å…ƒå¯¹è±¡çš„å·¥å‚ç±»ï¼Œåªä¸è¿‡åå­—ä¸å« <code>xxxFactory</code> è€Œå·²ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Cache to support the object identity semantics of autoboxing for values between</span></span><br><span class="line"><span class="comment"> * -128 and 127 (inclusive) as required by JLS.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * The cache is initialized on first usage.  The size of the cache</span></span><br><span class="line"><span class="comment"> * may be controlled by the &#123;<span class="doctag">@code</span> -XX:AutoBoxCacheMax=&lt;size&gt;&#125; option.</span></span><br><span class="line"><span class="comment"> * During VM initialization, java.lang.Integer.IntegerCache.high property</span></span><br><span class="line"><span class="comment"> * may be set and saved in the private system properties in the</span></span><br><span class="line"><span class="comment"> * sun.misc.VM class.</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">IntegerCache</span> </span>&#123;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> low = -<span class="number">128</span>;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> high;</span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">final</span> Integer cache[];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="comment">// high value may be configured by property</span></span><br><span class="line">        <span class="keyword">int</span> h = <span class="number">127</span>;</span><br><span class="line">        String integerCacheHighPropValue =</span><br><span class="line">            sun.misc.VM.getSavedProperty(<span class="string">"java.lang.Integer.IntegerCache.high"</span>);</span><br><span class="line">        <span class="keyword">if</span> (integerCacheHighPropValue != <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">int</span> i = parseInt(integerCacheHighPropValue);</span><br><span class="line">                i = Math.max(i, <span class="number">127</span>);</span><br><span class="line">                <span class="comment">// Maximum array size is Integer.MAX_VALUE</span></span><br><span class="line">                h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="number">1</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span>( NumberFormatException nfe) &#123;</span><br><span class="line">                <span class="comment">// If the property cannot be parsed into an int, ignore it.</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        high = h;</span><br><span class="line"></span><br><span class="line">        cache = <span class="keyword">new</span> Integer[(high - low) + <span class="number">1</span>];</span><br><span class="line">        <span class="keyword">int</span> j = low;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> k = <span class="number">0</span>; k &lt; cache.length; k++)</span><br><span class="line">            cache[k] = <span class="keyword">new</span> Integer(j++);</span><br><span class="line"></span><br><span class="line">        <span class="comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span></span><br><span class="line">        <span class="keyword">assert</span> IntegerCache.high &gt;= <span class="number">127</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">IntegerCache</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ä¸ºä»€ä¹ˆ <code>IntegerCache</code> åªç¼“å­˜ <code>-128</code> åˆ° <code>127</code> ä¹‹é—´çš„æ•´å‹å€¼å‘¢ï¼Ÿ</p>
<p>åœ¨ <code>IntegerCache</code> çš„ä»£ç å®ç°ä¸­ï¼Œå½“è¿™ä¸ªç±»è¢«åŠ è½½çš„æ—¶å€™ï¼Œç¼“å­˜çš„äº«å…ƒå¯¹è±¡ä¼šè¢«é›†ä¸­ä¸€æ¬¡æ€§åˆ›å»ºå¥½ã€‚æ¯•ç«Ÿæ•´å‹å€¼å¤ªå¤šäº†ï¼Œæˆ‘ä»¬ä¸å¯èƒ½åœ¨ <code>IntegerCache</code> ç±»ä¸­é¢„å…ˆåˆ›å»ºå¥½æ‰€æœ‰çš„æ•´å‹å€¼ï¼Œè¿™æ ·æ—¢å ç”¨å¤ªå¤šå†…å­˜ï¼Œä¹Ÿä½¿å¾—åŠ è½½ <code>IntegerCache</code> ç±»çš„æ—¶é—´è¿‡é•¿ã€‚æ‰€ä»¥ï¼Œæˆ‘ä»¬åªèƒ½é€‰æ‹©ç¼“å­˜å¯¹äºå¤§éƒ¨åˆ†åº”ç”¨æ¥è¯´æœ€å¸¸ç”¨çš„æ•´å‹å€¼ï¼Œä¹Ÿå°±æ˜¯ä¸€ä¸ªå­—èŠ‚çš„å¤§å°ï¼ˆ<code>-128</code> åˆ° <code>127</code> ä¹‹é—´çš„æ•°æ®ï¼‰ã€‚</p>
<p>å¦‚ä½•ä¿®æ”¹è¿™ä¸ªå€¼å‘¢ï¼Ÿ</p>
<p><code>JDK</code> æä¾›äº†æ–¹æ³•æ¥è®©æˆ‘ä»¬å¯ä»¥è‡ªå®šä¹‰ç¼“å­˜çš„æœ€å¤§å€¼ï¼Œä½†æ²¡æœ‰æä¾›è®¾ç½®æœ€å°å€¼çš„æ–¹æ³•ã€‚è¿™é‡Œåªæœ‰ <code>idea</code> çš„è®¾ç½®å‚æ•°ã€‚<code>Android Studio</code> è¿˜æ²¡æœ‰æ‰¾åˆ°ç›¸å…³çš„è®¾ç½®æ–¹æ³•ï¼Œæˆ‘è¯•è¿‡äº†å† <code>studio64.exe.vmoptions</code> ä¸­è®¾ç½®ï¼Œå¹¶ä¸”æ‰§è¡Œäº† <code>Invalidate Caches/Restart...</code> ä½†æ˜¯æ²¡æœ‰æ•ˆæœã€‚</p>
<p>å¸Œæœ›å“ªä½å¤§ä½¬æŒ‡ç‚¹ä¸€ä¸‹ ~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F;æ–¹æ³•ä¸€ï¼š</span><br><span class="line">-Djava.lang.Integer.IntegerCache.high&#x3D;255</span><br><span class="line">&#x2F;&#x2F;æ–¹æ³•äºŒï¼š</span><br><span class="line">-XX:AutoBoxCacheMax&#x3D;255</span><br></pre></td></tr></table></figure>

<p>é™¤äº† <code>Integer</code> ç±»å‹ä¹‹å¤–ï¼Œå…¶ä»–åŒ…è£…å™¨ç±»å‹ï¼Œæ¯”å¦‚ <code>Long</code>ã€<code>Short</code>ã€<code>Byte</code> ç­‰ï¼Œä¹Ÿéƒ½åˆ©ç”¨äº†äº«å…ƒæ¨¡å¼æ¥ç¼“å­˜ <code>-128</code> åˆ° <code>127</code> ä¹‹é—´çš„æ•°æ®ã€‚å…·ä½“æŸ¥çœ‹å¯¹åº”çš„ <code>valueOf()</code> æ–¹æ³•ã€‚</p>
<p>åœ¨æˆ‘ä»¬å¹³æ—¶çš„å¼€å‘ä¸­ï¼Œå¯¹äºä¸‹é¢è¿™æ ·ä¸‰ç§åˆ›å»ºæ•´å‹å¯¹è±¡çš„æ–¹å¼ï¼Œæˆ‘ä»¬ä¼˜å…ˆä½¿ç”¨åä¸¤ç§ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Integer a = <span class="keyword">new</span> Integer(<span class="number">123</span>);</span><br><span class="line">Integer a = <span class="number">123</span>;</span><br><span class="line">Integer a = Integer.valueOf(<span class="number">123</span>);</span><br></pre></td></tr></table></figure>

<p>ç¬¬ä¸€ç§åˆ›å»ºæ–¹å¼å¹¶ä¸ä¼šä½¿ç”¨åˆ° <code>IntegerCache</code>ï¼Œè€Œåé¢ä¸¤ç§åˆ›å»ºæ–¹æ³•å¯ä»¥åˆ©ç”¨ <code>IntegerCache</code> ç¼“å­˜ï¼Œè¿”å›å…±äº«çš„å¯¹è±¡ï¼Œä»¥è¾¾åˆ°èŠ‚çœå†…å­˜çš„ç›®çš„ã€‚</p>
<h2 id="4-2-String"><a href="#4-2-String" class="headerlink" title="4.2 String"></a>4.2 String</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">String s1 = <span class="string">"abc"</span>;</span><br><span class="line">String s2 = <span class="string">"abc"</span>;</span><br><span class="line">String s3 = <span class="keyword">new</span> String(<span class="string">"abc"</span>);</span><br><span class="line"></span><br><span class="line">System.out.println(s1 == s2);</span><br><span class="line">System.out.println(s1 == s3);</span><br></pre></td></tr></table></figure>

<p>ä¸Šé¢ä»£ç çš„è¿è¡Œç»“æœæ˜¯ï¼šä¸€ä¸ª <code>true</code>ï¼Œä¸€ä¸ª <code>false</code>ã€‚</p>
<p><code>String</code> ç±»åˆ©ç”¨äº«å…ƒæ¨¡å¼æ¥å¤ç”¨ç›¸åŒçš„å­—ç¬¦ä¸²å¸¸é‡ã€‚<code>JVM</code> ä¼šä¸“é—¨å¼€è¾Ÿä¸€å—å­˜å‚¨åŒºæ¥å­˜å‚¨å­—ç¬¦ä¸²å¸¸é‡ï¼Œè¿™å—å­˜å‚¨åŒºå«ä½œ <strong>â€œå­—ç¬¦ä¸²å¸¸é‡æ± â€</strong>ã€‚</p>
<p><code>String</code> ç±»çš„äº«å…ƒæ¨¡å¼çš„è®¾è®¡ï¼Œè·Ÿ <code>Integer</code> ç±»ç¨å¾®æœ‰äº›ä¸åŒã€‚<code>Integer</code> ç±»ä¸­è¦å…±äº«çš„å¯¹è±¡ï¼Œæ˜¯åœ¨ç±»åŠ è½½çš„æ—¶å€™ï¼Œå°±é›†ä¸­ä¸€æ¬¡æ€§åˆ›å»ºå¥½çš„ã€‚ä½†æ˜¯ï¼Œå¯¹äºå­—ç¬¦ä¸²æ¥è¯´ï¼Œæˆ‘ä»¬æ²¡æ³•äº‹å…ˆçŸ¥é“è¦å…±äº«å“ªäº›å­—ç¬¦ä¸²å¸¸é‡ï¼Œæ‰€ä»¥æ²¡åŠæ³•äº‹å…ˆåˆ›å»ºå¥½ï¼Œåªèƒ½åœ¨æŸä¸ªå­—ç¬¦ä¸²å¸¸é‡ç¬¬ä¸€æ¬¡è¢«ç”¨åˆ°çš„æ—¶å€™ï¼Œå­˜å‚¨åˆ°å¸¸é‡æ± ä¸­ï¼Œå½“ä¹‹åå†ç”¨åˆ°çš„æ—¶å€™ï¼Œç›´æ¥å¼•ç”¨å¸¸é‡æ± ä¸­å·²ç»å­˜åœ¨çš„å³å¯ï¼Œå°±ä¸éœ€è¦å†é‡æ–°åˆ›å»ºäº†ã€‚</p>
<h1 id="5-Android-æºç ä¸­çš„äº«å…ƒï¼ˆHandlerï¼‰"><a href="#5-Android-æºç ä¸­çš„äº«å…ƒï¼ˆHandlerï¼‰" class="headerlink" title="5 Android æºç ä¸­çš„äº«å…ƒï¼ˆHandlerï¼‰"></a>5 Android æºç ä¸­çš„äº«å…ƒï¼ˆHandlerï¼‰</h1><p>ä¸‡ä¸‡æ²¡æƒ³åˆ°ï¼Œå¾ˆä¸å¸¸ç”¨çš„äº«å…ƒæ¨¡å¼ï¼Œç«Ÿç„¶åœ¨æˆ‘ä»¬ç»å¸¸ä½¿ç”¨çš„ <code>Handler</code> ä¸­ç”¨åˆ°äº†ï¼è¯´èµ· <code>Handler</code> ï¼Œä¸€èˆ¬éƒ½æ˜¯åœ¨è€—æ—¶æ“ä½œçš„æ—¶å€™æ‰ä¼šä½¿ç”¨ <code>Handler</code> ï¼Œæ¯”å¦‚æ›´æ–° <code>UI</code>ï¼Œå¤§å®¶è‚¯å®šå¬è¿‡ä¸€å¥è¯ï¼Œ<code>UI</code> ä¸èƒ½å¤Ÿåœ¨å­çº¿ç¨‹ä¸­æ›´æ–°ã€‚è¿™åŸæœ¬å°±æ˜¯ä¸€ä¸ªä¼ªå‘½é¢˜ï¼Œå› ä¸ºå¹¶ä¸æ˜¯ <code>UI</code> ä¸å¯ä»¥åœ¨å­çº¿ç¨‹æ›´æ–°ï¼Œè€Œæ˜¯ <code>UI</code> ä¸å¯ä»¥åœ¨ä¸æ˜¯å®ƒçš„åˆ›å»ºçº¿ç¨‹é‡Œè¿›è¡Œæ›´æ–°ã€‚åªæ˜¯ç»å¤§å¤šæ•°æƒ…å†µä¸‹ <code>UI</code> éƒ½æ˜¯ä» <code>UI</code> çº¿ç¨‹ä¸­åˆ›å»ºçš„ï¼Œå› æ­¤ï¼Œåœ¨å…¶ä»–çº¿ç¨‹æ›´æ–°æ—¶ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚</p>
<p><a href="https://blog.csdn.net/lmj623565791/article/details/105624391" target="_blank" rel="noopener">Android UI çº¿ç¨‹æ›´æ–°UIä¹Ÿä¼šå´©æºƒï¼Ÿï¼Ÿï¼Ÿ</a></p>
<p>è¿™é‡Œæ’å…¥ä¸€ä¸ªå°å°çš„çŸ¥è¯†ç‚¹ï¼Œç„¶åå›åˆ°æˆ‘ä»¬çš„çŒªè„š ^(*ï¿£(oo)ï¿£)^  <code>handler</code> ä¸­ã€‚</p>
<p>æˆ‘ä»¬åœ¨é€šè¿‡ <code>Handler</code> ä¸­ä¼ é€’æ¶ˆæ¯æ—¶ä¼šä¼ é€’ä¸€ä¸ª <code>Runnable</code>ï¼Œ<code>Runnable</code> ä¼šè¢«åŒ…è£…åˆ°ä¸€ä¸ª <code>Message</code> å¯¹è±¡ä¸­ï¼Œç„¶åå†æŠ•é€’åˆ° <code>UI</code> çº¿ç¨‹çš„æ¶ˆæ¯é˜Ÿåˆ—ã€‚å…·ä½“çœ‹ <code>post</code> ä»£ç </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">boolean</span> <span class="title">post</span><span class="params">(Runnable r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">   <span class="keyword">return</span>  sendMessageDelayed(getPostMessage(r), <span class="number">0</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">static</span> Message <span class="title">getPostMessage</span><span class="params">(Runnable r)</span> </span>&#123;</span><br><span class="line">    Message m = Message.obtain();</span><br><span class="line">    m.callback = r;</span><br><span class="line">    <span class="keyword">return</span> m;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œ<code>Message</code> å¹¶ä¸æ˜¯ <code>new</code> å‡ºæ¥çš„ï¼Œè¿™ä¸ª <code>obtain</code> æœ‰ç‚¹è¹Šè·· ~ è¿™é‡Œåªç ”ç©¶å’Œäº«å…ƒæ¨¡å¼ç›¸å…³çš„éƒ¨åˆ†ï¼Œå…¶ä»–éƒ¨åˆ†çœ‹ä¸‹é¢æ‰©å±• ~ </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Message <span class="title">obtain</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sPool != <span class="keyword">null</span>) &#123;</span><br><span class="line">            Message m = sPool;</span><br><span class="line">            sPool = m.next;</span><br><span class="line">            m.next = <span class="keyword">null</span>;<span class="comment">// ä»sPoolä¸­å–å‡ºä¸€ä¸ª Message å¯¹è±¡ï¼Œå¹¶æ¶ˆæ¯é“¾è¡¨æ–­å¼€(å•ç‹¬çš„ä¸€ä¸ªèŠ‚ç‚¹)</span></span><br><span class="line">            m.flags = <span class="number">0</span>; <span class="comment">// clear in-use flag</span></span><br><span class="line">            sPoolSize--; <span class="comment">//æ¶ˆæ¯æ± çš„å¯ç”¨å¤§å°è¿›è¡Œå‡1æ“ä½œ</span></span><br><span class="line">            <span class="keyword">return</span> m;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> Message();<span class="comment">// å½“æ¶ˆæ¯æ± ä¸ºç©ºæ—¶ï¼Œç›´æ¥åˆ›å»ºMessageå¯¹è±¡</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>è¿™é‡Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨ <code>mPool</code> ä¸º <code>null</code> æ—¶æ‰ä¼šå»é‡æ–° <code>new</code> ä¸€ä¸ª <code>Message</code> ï¼Œé‚£æˆ‘ä»¬åªéœ€è¦çŸ¥é“è¿™ä¸ª <code>sPoolSync</code> å’Œ <code>sPool</code> æ˜¯ä»€ä¹ˆï¼Œå°±å¯ä»¥çŸ¥é“è¿™é‡Œçš„ç¼“å­˜æ˜¯æ€ä¹ˆåšçš„äº†ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * Defines a message containing a description and arbitrary data object that can be</span></span><br><span class="line"><span class="comment"> * sent to a &#123;<span class="doctag">@link</span> Handler&#125;.  This object contains two extra int fields and an</span></span><br><span class="line"><span class="comment"> * extra object field that allow you to not do allocations in many cases.</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * &lt;p class="note"&gt;While the constructor of Message is public, the best way to get</span></span><br><span class="line"><span class="comment"> * one of these is to call &#123;<span class="doctag">@link</span> #obtain Message.obtain()&#125; or one of the</span></span><br><span class="line"><span class="comment"> * &#123;<span class="doctag">@link</span> Handler#obtainMessage Handler.obtainMessage()&#125; methods, which will pull</span></span><br><span class="line"><span class="comment"> * them from a pool of recycled objects.&lt;/p&gt;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Message</span> <span class="keyword">implements</span> <span class="title">Parcelable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> Object sPoolSync = <span class="keyword">new</span> Object();</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Message sPool;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> sPoolSize = <span class="number">0</span>;</span><br></pre></td></tr></table></figure>

<p>é¦–å…ˆ <code>Message</code> æ–‡æ¡£ç¬¬ä¸€æ®µçš„æ„æ€å°±æ˜¯ä»‹ç»äº†ä¸€ä¸‹è¿™ä¸ª <code>Message</code> ç±»çš„å­—æ®µï¼Œä»¥åŠè¯´æ˜ <code>Message</code> å¯¹è±¡æ˜¯è¢«å‘é€åˆ° <code>Handler</code> çš„ï¼Œå¯¹äºæˆ‘ä»¬æ¥è¯´ä½œç”¨ä¸å¤§ã€‚</p>
<p>ç¬¬äºŒæ®µçš„æ„æ€æ˜¯å»ºè®®æˆ‘ä»¬ä½¿ç”¨ <code>Message</code> çš„ <code>obtain</code> æ–¹æ³•è·å– <code>Message</code> å¯¹è±¡ï¼Œè€Œä¸æ˜¯é€šè¿‡ <code>Message</code> çš„æ„é€ å‡½æ•°ï¼Œå› ä¸º <code>obtain</code> æ–¹æ³•ä¼šä»è¢«å›æ”¶çš„å¯¹è±¡æ± ä¸­è·å– <code>Message</code> å¯¹è±¡ã€‚</p>
<p>ç„¶åå†çœ‹çœ‹å…³é”®çš„å­—æ®µï¼Œ<code>sPoolSync</code> æ˜¯ä¸€ä¸ªæ™®é€šçš„ <code>Object</code> å¯¹è±¡ï¼Œå®ƒçš„ä½œç”¨å°±æ˜¯ç”¨äºåœ¨è·å– <code>Message</code> å¯¹è±¡æ—¶è¿›è¡ŒåŒæ­¥é”ã€‚å†çœ‹ <code>sPool</code> å±…ç„¶æ˜¯ä¸€ä¸ª <code>Message</code> å¯¹è±¡ï¼Œå±…ç„¶ä¸æ˜¯æ¶ˆæ¯æ± ä¹‹ç±»çš„ä¸œè¥¿ï¼Œæ—¢ç„¶å®ƒå‘½åä¸º <code>sPool</code> ä¸å¯èƒ½æ˜¯æœ‰åæ— å®å§ã€‚åŸæ¥è¿˜æœ‰ä¸€ä¸ªæ¯”è¾ƒæ€»è¦çš„å­—æ®µ</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// sometimes we store linked lists of these things</span></span><br><span class="line">Message next;</span><br></pre></td></tr></table></figure>

<p>åŸæ¥ <code>Message</code> æ¶ˆæ¯æ± æ²¡æœ‰ä½¿ç”¨ <code>map</code> è¿™æ ·çš„å®¹å™¨ï¼Œä½¿ç”¨çš„æ˜¯é“¾è¡¨ï¼è¿™ä¸ª <code>next</code> å°±æ˜¯æŒ‡å‘ä¸‹ä¸€ä¸ª <code>Message</code> çš„ã€‚</p>
<p>æ¯ä¸ª <code>Message</code> å¯¹è±¡éƒ½æœ‰ä¸€ä¸ªåŒç±»å‹çš„ <code>next</code> å­—æ®µï¼Œè¿™ä¸ª <code>next</code> æŒ‡å‘çš„å°±æ˜¯ä¸‹ä¸€ä¸ªå¯ç”¨çš„ <code>Message</code> ï¼Œæœ€åä¸€ä¸ªå¯ç”¨çš„ <code>Message</code> çš„ <code>next</code> åˆ™ä¸ºç©ºã€‚è¿™æ ·ä¸€æ¥ï¼Œæ‰€æœ‰å¯ç”¨çš„ <code>Message</code> å¯¹è±¡å°±é€šè¿‡ <code>next</code> ä¸²è¿æˆä¸€ä¸ªå¯ç”¨çš„ <code>Message</code> æ± ã€‚</p>
<p>æˆ‘ä»¬åœ¨ <code>obtain</code> å‡½æ•°ä¸­åªçœ‹åˆ°äº†ä»é“¾è¡¨ä¸­è·å–ï¼Œå¹¶ä¸”çœ‹åˆ°å­˜å‚¨ã€‚å¦‚æœæ¶ˆæ¯æ± é“¾è¡¨ä¸­æ²¡æœ‰å¯ç”¨å¯¹è±¡çš„æ—¶å€™ï¼Œ<code>obtain</code> ä¸­åˆ™æ˜¯ç›´æ¥è¿”å›ä¸€ä¸ªé€šè¿‡ <code>new</code> åˆ›å»ºçš„ <code>Message</code> å¯¹è±¡ï¼Œè€Œä¸”å¹¶æ²¡æœ‰å­˜å‚¨åˆ°é“¾è¡¨ä¸­ã€‚é‚£ä¹ˆè¿™äº› <code>Message</code> å¯¹è±¡ä»€ä¹ˆæ—¶å€™ä¼šè¢«æ”¾åˆ°é“¾è¡¨ä¸­å‘¢ï¼Ÿ</p>
<p><code>â€œwhich will pull them from a pool of recycled objects.â€</code>ï¼Œè¿™æ˜¯ <code>Message</code> æ³¨é‡Šä¸­çš„ç¬¬äºŒå¥è¯æœ«å°¾çš„ä¸€å¥è¯ï¼ŒåŸæ¥åœ¨åˆ›å»ºçš„æ—¶å€™ä¸ä¼šæŠŠ <code>Message</code> å¯¹è±¡æ”¾åˆ°æ± ä¸­ï¼Œåœ¨å›æ”¶ï¼ˆè¿™é‡Œçš„å›æ”¶å¹¶ä¸æ˜¯æŒ‡è™šæ‹Ÿæœºå›æ”¶<code>Message</code> å¯¹è±¡ï¼‰è¯¥å¯¹è±¡æ—¶æ‰ä¼šå°†è¯¥å¯¹è±¡æ·»åŠ åˆ°é“¾è¡¨ä¸­ã€‚</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">recycle</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">// åˆ¤æ–­æ˜¯å¦è¯¥æ¶ˆæ¯è¿˜åœ¨ä½¿ç”¨</span></span><br><span class="line">    <span class="keyword">if</span> (isInUse()) &#123;</span><br><span class="line">        <span class="keyword">if</span> (gCheckRecycle) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> IllegalStateException(<span class="string">"This message cannot be recycled because it "</span></span><br><span class="line">                    + <span class="string">"is still in use."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// æ¸…ç©ºçŠ¶æ€ï¼Œå¹¶ä¸”å°†æ¶ˆæ¯æ·»åŠ åˆ°æ¶ˆæ¯æ± ä¸­</span></span><br><span class="line">    recycleUnchecked();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//å¯¹äºä¸å†ä½¿ç”¨çš„æ¶ˆæ¯ï¼ŒåŠ å…¥åˆ°æ¶ˆæ¯æ±  </span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">recycleUnchecked</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ¸…ç©ºæ¶ˆæ¯çŠ¶æ€ï¼Œè®¾ç½®è¯¥æ¶ˆæ¯ in - use flag</span></span><br><span class="line">    flags = FLAG_IN_USE;</span><br><span class="line">    what = <span class="number">0</span>;</span><br><span class="line">    arg1 = <span class="number">0</span>;</span><br><span class="line">    arg2 = <span class="number">0</span>;</span><br><span class="line">    obj = <span class="keyword">null</span>;</span><br><span class="line">    replyTo = <span class="keyword">null</span>;</span><br><span class="line">    sendingUid = -<span class="number">1</span>;</span><br><span class="line">    when = <span class="number">0</span>;</span><br><span class="line">    target = <span class="keyword">null</span>;</span><br><span class="line">    callback = <span class="keyword">null</span>;</span><br><span class="line">    data = <span class="keyword">null</span>;</span><br><span class="line">    <span class="comment">// å›æ”¶æ¶ˆæ¯åˆ°æ¶ˆæ¯æ± ä¸­</span></span><br><span class="line">    <span class="keyword">synchronized</span> (sPoolSync) &#123;</span><br><span class="line">        <span class="keyword">if</span> (sPoolSize &lt; MAX_POOL_SIZE) &#123; <span class="comment">//å½“æ¶ˆæ¯æ± æ²¡æœ‰æ»¡æ—¶ï¼Œå°†Messageå¯¹è±¡åŠ å…¥æ¶ˆæ¯æ± </span></span><br><span class="line">            next = sPool;</span><br><span class="line">            sPool = <span class="keyword">this</span>;</span><br><span class="line">            sPoolSize++;<span class="comment">//æ¶ˆæ¯æ± çš„å¯ç”¨å¤§å°è¿›è¡ŒåŠ 1æ“ä½œ</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><code>recycle</code> å‡½æ•°ä¼šå°†ä¸€ä¸ª <code>Message</code> å¯¹è±¡å›æ”¶åˆ°ä¸€ä¸ªå…¨å±€çš„æ± ä¸­ï¼Œè¿™ä¸ªæ± ä¹Ÿå°±æ˜¯é“¾è¡¨ã€‚<br><code>recycle</code> å‡½æ•°é¦–å…ˆåˆ¤æ–­è¯¥æ¶ˆæ¯æ˜¯å¦è¿˜åœ¨ä½¿ç”¨ï¼Œå¦‚æœè¿˜åœ¨ä½¿ç”¨åˆ™æŠ›å‡ºå¼‚å¸¸ï¼Œå¦åˆ™è°ƒç”¨ <code>recycleUnchecked</code> å‡½æ•°å¤„ç†è¯¥æ¶ˆæ¯ã€‚</p>
<p><code>recycleUnchecked</code> å‡½æ•°ä¸­å…ˆæ¸…ç©ºè¯¥æ¶ˆæ¯çš„å„å­—æ®µï¼Œå¹¶ä¸”å°† <code>flags</code> è®¾ç½®ä¸º <code>FLAG_IN_USE</code> ï¼Œè¡¨æ˜è¯¥æ¶ˆæ¯å·²è¢«ä½¿ç”¨ï¼Œè¿™ä¸ª <code>flag</code> åœ¨ <code>obtain</code> å‡½æ•°ä¸­ä¼šè¢«ç½®ä¸º <code>0</code> ï¼Œè¿™æ ·æ ¹æ®è¿™ä¸ª <code>flag</code> å°±èƒ½å¤Ÿè¿½è¸ªè¯¥æ¶ˆæ¯çš„çŠ¶æ€ã€‚</p>
<p>ç„¶ååˆ¤æ–­æ˜¯å¦è¦å°†è¯¥æ¶ˆæ¯å›æ”¶åˆ°æ¶ˆæ¯æ± ä¸­ï¼Œå¦‚æœæ± çš„å¤§å°å°äº <code>MAX_POOL_SIZE</code> æ—¶ï¼Œå°†<strong>è‡ªèº«æ·»åŠ åˆ°é“¾è¡¨çš„è¡¨å¤´</strong>ã€‚</p>
<p>ä¾‹å¦‚ï¼Œå½“é“¾è¡¨ä¸­è¿˜æ²¡æœ‰å…ƒç´ æ—¶ï¼Œå°†ç¬¬ä¸€ä¸ª<code>Message</code> å¯¹è±¡æ·»åŠ åˆ°é“¾è¡¨ä¸­ï¼Œæ­¤æ—¶ <code>sPool</code> ä¸ºnullï¼Œ<code>next</code> æŒ‡å‘äº† <code>sPool</code> ï¼Œå› æ­¤ï¼Œ<code>next</code> ä¹Ÿä¸º <code>null</code> ï¼Œç„¶å <code>sPool</code> åˆæŒ‡å‘äº† <code>this</code> ï¼Œå› æ­¤ï¼Œ<code>sPool</code> å°±æŒ‡å‘äº†å½“å‰è¿™ä¸ªè¢«å›æ”¶çš„å¯¹è±¡ï¼Œå¹¶ä¸” <code>sPoolSize</code> åŠ 1ã€‚<strong>ç›¸å½“äºå½“å‰è¦å›æ”¶çš„ <code>Message</code> (æ—¢ç„¶æ˜¯è¦è¢«å›æ”¶çš„ï¼Œè‚¯å®šæ˜¯ä¸€ä¸ªç‹¬ç«‹çš„èŠ‚ç‚¹) <code>next</code> æŒ‡å‘å›æ”¶æ± çš„å¤´èŠ‚ç‚¹ï¼Œå†å°† <code>sPool(å¤´æŒ‡é’ˆ)</code>  æŒ‡å‘å½“å‰èŠ‚ç‚¹ï¼Œä½œä¸ºå¤´èŠ‚ç‚¹ã€‚<code>obtain</code> å–çš„æ—¶å€™å°±æ˜¯å°†å¤´èŠ‚ç‚¹ä¸ä¹‹åçš„èŠ‚ç‚¹æ–­å¼€ï¼Œå•ç‹¬å–å‡ºæ¥ä½¿ç”¨ã€‚</strong></p>
<p>è¿™é‡Œçš„ <code>Message</code> ç›¸å½“äºæ‰¿æ‹…äº†äº«å…ƒæ¨¡å¼ä¸­ 3 ä¸ªå…ƒç´ çš„èŒè´£ï¼Œå³æ˜¯ <code>Flyweight</code> æŠ½è±¡ï¼Œåˆæ˜¯ <code>ConcreteFlyweight</code> è§’è‰²ï¼ŒåŒæ—¶åˆæ‰¿æ‹…äº† <code>FlyweightFactory</code> ç®¡ç†å¯¹è±¡æ± çš„èŒè´£ã€‚å› ä¸º <code>Android</code> åº”ç”¨æ˜¯äº‹ä»¶é©±åŠ¨çš„ï¼Œå› æ­¤ï¼Œå¦‚æœé€šè¿‡ <code>new</code> åˆ›å»º <code>Message</code> å°±ä¼šåˆ›å»ºå¤§é‡é‡å¤çš„ <code>Message</code> å¯¹è±¡ï¼Œå¯¼è‡´å†…å­˜å ç”¨ç‡é«˜ã€é¢‘ç¹ <code>GC</code> ç­‰é—®é¢˜ï¼Œé€šè¿‡äº«å…ƒæ¨¡å¼åˆ›å»ºä¸€ä¸ªå¤§å°ä¸º 50 çš„æ¶ˆæ¯æ± ï¼Œé¿å…äº†ä¸Šè¿°é—®é¢˜çš„äº§ç”Ÿï¼Œä½¿å¾—è¿™äº›é—®é¢˜è¿åˆƒè€Œè§£ã€‚</p>
<p><strong><code>Handler</code> æ‰©å±•</strong></p>
<p><a href="http://gityuan.com/2015/12/26/handler-message-framework/" target="_blank" rel="noopener">Androidæ¶ˆæ¯æœºåˆ¶-Handler(frameworkç¯‡)</a></p>
<p><a href="http://gityuan.com/2015/12/27/handler-message-native/" target="_blank" rel="noopener">Androidæ¶ˆæ¯æœºåˆ¶-Handler(nativeç¯‡)</a></p>
<p><a href="http://gityuan.com/2016/01/01/handler-message-usage/" target="_blank" rel="noopener">Androidæ¶ˆæ¯æœºåˆ¶3-Handler(å®æˆ˜)</a></p>
</div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">æ–‡ç« ä½œè€…: </span><span class="post-copyright-info"><a href="mailto:undefined">CalmCenter</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">æ–‡ç« é“¾æ¥: </span><span class="post-copyright-info"><a href="https://calmcenter.club/2020/design-pattern-flyweight.html">https://calmcenter.club/2020/design-pattern-flyweight.html</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">ç‰ˆæƒå£°æ˜: </span><span class="post-copyright-info">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜æ¥è‡ª <a href="https://calmcenter.club" target="_blank">CalmCenter</a>ï¼</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E7%BC%96%E7%A0%81/">ç¼–ç </a></div><div class="post_share"></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> æ‰“èµ<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.png" alt="å¾®ä¿¡"/><div class="post-qr-code__desc">å¾®ä¿¡</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.png" alt="æ”¯ä»˜å¯¶"/><div class="post-qr-code__desc">æ”¯ä»˜å¯¶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/design-pattern-composite.html"><img class="next_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover51.webp" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="next_info">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-ç»„åˆæ¨¡å¼</div></div></a></div></nav><div class="relatedPosts"><div class="relatedPosts_headline"><i class="fa fa-fw fa-thumbs-up" aria-hidden="true"></i><span> ç›¸å…³æ¨è</span></div><div class="relatedPosts_list"><div class="relatedPosts_item"><a href="/2020/design-pattern-proxy.html" title="è®¾è®¡æ¨¡å¼-ç»“æ„å‹-ä»£ç†æ¨¡å¼"><img class="relatedPosts_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover40.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-13</div><div class="relatedPosts_title">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-ä»£ç†æ¨¡å¼</div></div></a></div><div class="relatedPosts_item"><a href="/2020/design-pattern-adapter.html" title="è®¾è®¡æ¨¡å¼-ç»“æ„å‹-é€‚é…å™¨æ¨¡å¼"><img class="relatedPosts_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover22.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-08-27</div><div class="relatedPosts_title">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-é€‚é…å™¨æ¨¡å¼</div></div></a></div><div class="relatedPosts_item"><a href="/2020/design-pattern-decorator.html" title="è®¾è®¡æ¨¡å¼-ç»“æ„å‹-è£…é¥°æ¨¡å¼"><img class="relatedPosts_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover53.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-29</div><div class="relatedPosts_title">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-è£…é¥°æ¨¡å¼</div></div></a></div><div class="relatedPosts_item"><a href="/2020/oop.html" title="è®¾è®¡æ¨¡å¼ç¯‡-é¢å‘å¯¹è±¡"><img class="relatedPosts_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover23.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-06-11</div><div class="relatedPosts_title">è®¾è®¡æ¨¡å¼ç¯‡-é¢å‘å¯¹è±¡</div></div></a></div><div class="relatedPosts_item"><a href="/2020/design-pattern-bridge.html" title="è®¾è®¡æ¨¡å¼-ç»“æ„å‹-æ¡¥æ¥æ¨¡å¼"><img class="relatedPosts_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover11.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-07-15</div><div class="relatedPosts_title">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-æ¡¥æ¥æ¨¡å¼</div></div></a></div><div class="relatedPosts_item"><a href="/2020/design-pattern-composite.html" title="è®¾è®¡æ¨¡å¼-ç»“æ„å‹-ç»„åˆæ¨¡å¼"><img class="relatedPosts_cover" data-src="https://gitee.com/CalmCenter/Pic/raw/master/cover51.webp"><div class="relatedPosts_main is-center"><div class="relatedPosts_date"><i class="fa fa-calendar fa-fw" aria-hidden="true"></i> 2020-09-18</div><div class="relatedPosts_title">è®¾è®¡æ¨¡å¼-ç»“æ„å‹-ç»„åˆæ¨¡å¼</div></div></a></div></div><div class="clear_both"></div></div><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> è¯„è®º</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'KiQHU70TUHYrumpFuuhC3UEg-gzGzoHsz',
  appKey: 'wX1m2ATu8q4CyeRhOQ3FUucn',
  notify: true,
  verify: true,
  placeholder: 'ğŸ’¦ğŸ’¦æ—¢ç„¶æ¥äº†ä½•ä¸ç•™ä¸‹ä½ çš„è¶³è¿¹(æ”¯æŒ Markdown å“¦~)',
  avatar: 'robohash',
  meta: guestInfo,
  pageSize: '10',
  lang: 'zh-CN',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" style="background-image: url(https://gitee.com/CalmCenter/Pic/raw/master/cover17.webp)" data-type="photo"><div id="footer-wrap"><div class="copyright">&copy;2020 By CalmCenter</div><div class="framework-info"><span>é©±åŠ¨ </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>ä¸»é¢˜ </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div><div id="landlord"><div class="message" style="opacity:0"></div><canvas class="live2d" id="live2d" width="240" height="250"></canvas><div class="hide-button">éšè—</div></div><script type="text/javascript" src="https://cdn.bootcss.com/jquery/2.2.4/jquery.min.js"></script><script type="text/javascript">var message_Path = '/live2d/'
var home_Path = 'https://calmcenter.club/'</script><script type="text/javascript" src="/live2d/js/live2d.js"></script><script type="text/javascript" src="/live2d/js/message.js"></script><script type="text/javascript">loadlive2d("live2d", "/live2d/model/xxb2/model.json");</script><link rel="stylesheet" href="/live2d/css/live2d.css"/></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="é˜…è¯»æ¨¡å¼"></i><i class="fa fa-plus" id="font_plus" title="æ”¾å¤§å­—ä½“"></i><i class="fa fa-minus" id="font_minus" title="ç¼©å°å­—ä½“"></i><i class="darkmode fa fa-moon-o" id="darkmode" title="å¤œé—´æ¨¡å¼"></i></div><div id="rightside-config-show"><div id="rightside_config" title="è®¾ç½®"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="ç›´è¾¾è¯„è®º"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="ç›®å½•" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="å›åˆ°é¡¶éƒ¨" aria-hidden="true"></i></div></section><div class="search-dialog" id="local-search"><div class="search-dialog__title" id="local-search-title">æœ¬åœ°æœç´¢</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="æœç´¢æ–‡ç« " type="text"/></div></div></div><hr/><div id="local-search-results"><div id="local-hits"></div><div id="local-stats"><div class="local-search-stats__hr" id="hr"><span>ç”±</span> <a href="https://github.com/wzpan/hexo-generator-search" target="_blank" rel="noopener" style="color:#49B1F5;">hexo-generator-search</a>
 <span>æä¾›æ”¯æŒ</span></div></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/medium-zoom/dist/medium-zoom.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><script id="ribbon_piao" mobile="true" src="/js/third-party/piao.js"></script><script src="/js/third-party/activate-power-mode.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = true;
document.body.addEventListener('input', POWERMODE);
</script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@latest/instantpage.min.js" type="module"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/search/local-search.js"></script></body></html>